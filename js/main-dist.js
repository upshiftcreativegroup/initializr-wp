function deferBg(){for(var bgDefer=document.getElementsByClassName("defer_bg"),i=0;i<bgDefer.length;i++)bgDefer[i].getAttribute("data-bg-load")&&bgDefer[i].setAttribute("style",bgDefer[i].getAttribute("data-bg-load"))}function deferImg(){for(var imgDefer=document.getElementsByClassName("defer_img"),i=0;i<imgDefer.length;i++)imgDefer[i].getAttribute("data-src")&&imgDefer[i].setAttribute("src",imgDefer[i].getAttribute("data-src")),imgDefer[i].getAttribute("data-srcset")&&imgDefer[i].setAttribute("srcset",imgDefer[i].getAttribute("data-srcset"))}function switcher(){$(".switch_wrap").each(function(){var thisWrap=$(this),switch1=thisWrap.find(".switch1"),switch2=thisWrap.find(".switch2");switchIt(switch1,switch2),$(window).resize(function(){switchIt(switch1,switch2)})})}function switchIt(switch1,switch2){1<$("#res").css("z-index")?switch1.insertBefore(switch2):switch2.insertBefore(switch1)}function headHelp(){if($(".hello").length){var newMin=0;newMin=$("header .pure-g").height(),newMin+=10,$("header").css("min-height",newMin)}}function unifyGrid(){var maxHeight=-1;$(".heightblock").each(function(){var inner=$(this).children(".innerheight");maxHeight=maxHeight>inner.height()?maxHeight:inner.height()}),$(".heightblock").each(function(){$(this).height(maxHeight)})}function objectFit(){Modernizr.objectfit||$("img.object_fit").each(function(){var imgSrc,imgEl=$(this);imgEl.data("src")?imgSrc=imgEl.data("src"):imgEl.attr("src")&&(imgSrc=imgEl.prop("src")),imgEl.parent().addClass("bg").css("background-image","url("+imgSrc+")"),imgEl.hide()})}function runSlider(hbSlider){hbSlider.on("init",function(event,slick,currentSlide,nextSlide){hbSlider.addClass("slideon"),setTimeout(function(){var current=$(".slick-current");current.addClass("custom-current"),fadeSlide(current),hbSlider.find("img").each(function(){$(this).loadImg()})},200),$(this).hasClass("news-slider")&&1<$("#res").css("z-index")&&unifyGrid(),Waypoint.refreshAll(),objectFit()}),hbSlider.on("beforeChange",function(event,slick,currentSlide,nextSlide){hbSlider.find('[data-slick-index="'+currentSlide+'"]').removeClass("custom-current")}),hbSlider.on("afterChange",function(event,slick,currentSlide){fadeSlide(hbSlider.find('[data-slick-index="'+currentSlide+'"]'))});var autoplay=!0,hasDots=!1,touchStuff=!0,fading=!0;hbSlider.hasClass("has_dots")&&(hasDots=!0),hbSlider.hasClass("no_auto")&&(autoplay=!1),hbSlider.hasClass("no_touching")&&(touchStuff=!1),hbSlider.hasClass("nofading")&&(fading=!1),hbSlider.waypoint(function(direction){hbSlider=$(this.element),setTimeout(function(){hbSlider.slick({slide:".slide",centerMode:!1,slidesToShow:1,pauseOnHover:!1,slidesToScroll:1,infinite:!0,autoplay:autoplay,autoplaySpeed:6e3,speed:650,pauseOnHover:!1,fade:fading,dots:hasDots,draggable:touchStuff,swipe:touchStuff,touchMove:touchStuff,arrows:!0,touchThreshold:10,prevArrow:'<div class="customprev"><i class="fal fa-angle-left"></i></div>',nextArrow:'<div class="customnext"><i class="fal fa-angle-right"></i></div>',useTransform:!0,cssEase:cB,adaptiveHeight:!1})},500),this.destroy()},{offset:"150%"})}function fadeSlide(current){current.addClass("custom-current"),current.find(".fade").each(function(){var currentFade=$(this);currentFade.hasClass("faded")||currentFade.addClass("faded")})}function hoverForm(){$(".form_bar").on("mouseover",function(){$(this).hasClass("active")||$(this).addClass("hovered")}),$(".form_bar").on("mouseout",function(){$(this).hasClass("active")||$(this).removeClass("hovered")})}function openForm(){$(".form_bar").click(function(){$(this).hasClass("active")||($(this).addClass("active").off().removeClass("hovered"),$(".bar_wrap").addClass("active"),$(".form_block").removeClass("pure-u-md-5-6").addClass("pure-u-md-7-8"),hoverForm())})}function checkInputs(input){!input.parent().prev("label").hasClass("label_focus")||""!=input.val()&&"(___) ___-____"!=input.val()?""!=input.val()&&"(___) ___-____"!=input.val()&&input.parent().prev("label").addClass("label_focus"):input.parent().prev("label").removeClass("label_focus")}function coolHolders(){$('.gfield [name^="input"]').on("focusin keypress",function(){$(this).parent().prev("label").addClass("label_focus")}),$('.gfield [name^="input"]').on("focusout input change",function(){checkInputs($(this))})}function gForm_rendered(){$(".ginput_container_select select").niceSelect(),coolHolders(),$('.gfield [name^="input"]').each(function(){checkInputs($(this))})}function videoStuff(){$("video").length&&(1<$("#res").css("z-index")&&$("video")[0].play(),setTimeout(function(){$("video")[0].paused||$(".pre_block").addClass("bye")},100))}if(switcher(),headHelp(),jQuery.fn.loadImg=function(){return this.attr("src",this.data("src")),this.attr("srcset",this.data("srcset")),this},$.easing.jswing=$.easing.swing,$.extend($.easing,{easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b}}),$("img.object_fit").length&&objectFit(),$(".defer_img").length&&deferImg(),$(".lazy_waypoint")&&$(".lazy_waypoint").waypoint(function(direction){$(this.element).loadImg(),this.destroy()},{offset:"100%"}),$(".slider").length&&($(".slider").each(function(){var hbSlider=$(this);if(hbSlider.hasClass("news_sl")&&$("#res").css("z-index")<2)return hbSlider.find("img").each(function(){$(this).loadImg()}),!1;runSlider(hbSlider)}),$(window).resize(function(){$(".news_sl").each(function(){$(this).hasClass("news_sl")&&!$(this).hasClass("slideon")&&1<$("#res").css("z-index")?runSlider($(".news_sl")):$(this).hasClass("news_sl")&&$(this).hasClass("slideon")&&$("#res").css("z-index")<2&&$(".news_sl.slideon").slick("unslick").removeClass("slideon")})})),$(".hellobar").length){var helloBar=$(".hellobar"),helloX=helloBar.find(".hello_x"),revTime=helloBar.data("rev"),helloCookie=Cookies.get("bar");helloCookie!=revTime&&(helloBar.removeClass("closed"),Cookies.remove("bar"),console.log("new cookie: "+Cookies.get("bar"))),helloX.click(function(h){helloBar.addClass("closed"),Cookies.remove("bar"),Cookies.set("bar",revTime)})}$(".scrollto").length&&$(".scrollto").on("click",function(scr){var scrollHash=$(this).attr("href");scr.preventDefault(),$("html,body").animate({scrollTop:$(scrollHash).offset().top-50},500)}),$(".xb").click(function(){$(".form_bar").removeClass("active hovered"),$(".form_block").removeClass("pure-u-md-7-8").addClass("pure-u-md-5-6"),$(".bar_wrap").removeClass("active"),setTimeout(function(){openForm()},200)}),openForm(),$(document).keyup(function(e){27===e.keyCode&&$(".form_bar").hasClass("active")&&$(".xb").click()});var vipButton=$('a[href="#vip"]');vipButton.on("click",function(vip){vip.preventDefault(),$(".form_bar").hasClass("active")||$(".form_bar").click()}),vipButton.on("mouseover",function(){$(".form_bar").addClass("hovered")}),vipButton.on("mouseout",function(){$(".form_bar").removeClass("hovered")}),hoverForm();var myElement=document.querySelector("body"),headroom=new Headroom(myElement,{tolerance:10});headroom.init();var splash=$(".splash_bg");setTimeout(function(){setTimeout(function(){},1e3)},1e3),$(".nav_button").on("click",function(nav){nav.preventDefault(),$(this).hasClass("of_info")?$(".infopane").toggleClass("active"):($(".nav_pane").toggleClass("active"),$("body").toggleClass("menu-on"))}),lax.setup(),document.addEventListener("scroll",function(e){lax.update(window.scrollY)},!1),window.addEventListener("resize",function(){lax.populateElements()});var checksOn,apiForm=$("form#api_form"),allRows=$(".av_row_plan, .av_row_unit, .av_card"),allClasses="selected_date selected_range selected_beds";apiForm.length&&$("select").niceSelect(),$(".plan_link").on("click",function(p){p.preventDefault();var thisLink=$(this),lastRow=$(".av_row_plan.plan_selected"),thisRow=thisLink.closest(".av_row_plan"),planId=thisLink.data("planid");thisRow.toggleClass("plan_selected"),thisRow.hasClass("plan_selected")&&thisLink.find(".viewnum").html("Hide"),lastRow.next(".av_row_units").slideUp(200,function(){lastRow.removeClass("plan_selected").find(".viewnum").html("View")}),lastRow.get(0)!=thisRow.get(0)&&$('.av_row_units[data-planid="'+planId+'"]').slideToggle(200,function(){$(window).width()<710&&$("html, body").animate({scrollTop:thisRow.offset().top},200)})}),apiForm.on("submit",function(s){console.log("submit"),s.preventDefault();checksOn=0;var rentMax=999999;0==$("#maxRent").val()?rentMax=999999:$("#maxRent").val()&&(rentMax=$("#maxRent").val()),allRows.each(function(){var thisMin=$(this).data("rmin"),thisMax=$(this).data("rmax");thisMin<=rentMax?$(this).addClass("selected_range"):thisMin<0&&thisMax<0?$(this).addClass("selected_range"):$(this).removeClass("selected_range")});var rentDate=$("#avDate").val();console.log(rentDate),(rentDate="Availability"==!rentDate?new Date(rentDate):new Date).setDate(rentDate.getDate()+90),allRows.each(function(){var thisDate=$(this).data("date");thisDate&&(thisDate=new Date(thisDate)),thisDate<=rentDate?$(this).addClass("selected_date"):$(this).removeClass("selected_date")}),thisCheck=$(this);var beds=apiForm.find("#avBeds").val();"studio"==beds&&(beds="0"),$(".av_row_plan, .av_row_unit, .av_card").removeClass("selected_beds"),$('.av_row_plan[data-beds="'+beds+'"], .av_row_unit[data-beds="'+beds+'"], .av_card[data-beds="'+beds+'"]').addClass("selected_beds"),checksOn=1,beds||allRows.addClass("selected_beds"),allRows.each(function(){var unitParent=$(this).parent(".av_row_units");if($(this).hasClass("selected_range")&&$(this).hasClass("selected_beds")&&$(this).hasClass("selected_date")&&unitParent.length){var unitPlanId=unitParent.data("planid"),unitCt=$(this).siblings(".av_row_unit.selected_range.selected_beds.selected_date").length+1;$('.av_row_plan[data-planid="'+unitPlanId+'"], .av_card[data-planid="'+unitPlanId+'"]').addClass("selected_range selected_beds selected_date"),$('.av_row_plan[data-planid="'+unitPlanId+'"] .numnum').text(unitCt)}}),allRows.each(function(){$(this).hasClass("selected_range")&&$(this).hasClass("selected_beds")&&$(this).hasClass("selected_date")?$(this).slideDown(200):$(this).slideUp(200)}),setTimeout(function(){lax.populateElements()},250)}),$(".av_row_plan .av_spec").click(function(){var planSelect=$(this).closest("[data-planid]").data("planid");$('.plan_link[data-planid="'+planSelect+'"]').click()});var avDateField=document.getElementById("avDate"),firstDate=$("#firstDate");if(firstDate=firstDate.length?new Date(firstDate.val()):new Date,avDateField)var pickr=avDateField.flatpickr({altInput:!0,altFormat:"m/d/Y",disableMobile:"true",minDate:firstDate,maxDate:(new Date).fp_incr(90),onReady:function(){}});var galCat,gBox=$(".gallery_box"),gImgs=$(".gallery_img"),baseUrl=$('head [rel="canonical"]').attr("href");window.location.href.split("/gallery/")[1]&&(galCat=window.location.href.split("/gallery/")[1].replace(/\//gi,""));var cList=$(".cl_list");if($(".cl_list").length){var cHead=$(".cl_head");cHead.click(function(){$("#res").css("z-index")<2&&(cList.slideToggle(250),cHead.toggleClass("opened"))}),cList.find(".cl_item").click(function(){var newCat=$(this).text();$("#res").css("z-index")<2&&(cHead.text(newCat),cHead.click())})}if($(".cat_link")&&($(".cat_link").on("click",function(cl){cl.preventDefault(),$(this).addClass("active").siblings(".cat_link").removeClass("active");var thisCat=$(this).data("cat");gBox.addClass("transing"),"all-photos"==thisCat?history.replaceState(null,null,baseUrl):history.replaceState(null,null,baseUrl+thisCat+"/"),$(".gallery_img").removeClass("spread"),setTimeout(function(){gImgs.removeClass("active"),$('.gallery_img[data-cats*="'+thisCat+'"]').addClass("active"),gBox.removeClass("transing"),$(".gallery_img.active.pure-u-sm-1-1").each(function(){var thisEl=$(this),prevPrev=thisEl.prev().prev(".pure-u-sm-1-2.active");!thisEl.prev().is(".active")&&prevPrev.length&&prevPrev.addClass("spread")}),Waypoint.refreshAll()},350)}),$('.cat_link[data-cat="'+galCat+'"]').length?($('.cat_link[data-cat="'+galCat+'"]').click(),cHead.text(galCat)):$('.cat_link[data-cat="all-photos"]').addClass("active")),$(window).resize(function(){var getHeight=$(".popup_caption").height();$(".caption_inner").css("width",getHeight+"px"),headHelp()}),gForm_rendered(),$(document).on("gform_post_render",function(){gForm_rendered()}),$('[href*="regarding-unit"]').click(function(u){u.preventDefault();var unitNum=$(this).attr("href").split("regarding-unit=")[1];$(".unit_field input").val(unitNum),$(".infopane").addClass("active"),gForm_rendered()}),$(document).on("gform_confirmation_loaded",function(event,formId){$(".form_start").removeClass("active"),$(".form_finish").addClass("active")}),$(".pre_block").length,videoStuff(),$(window).resize(function(){videoStuff()}),$("#avBeds").length&&window.location.href.split("beds=")[1]){var theseBeds=window.location.href.split("beds=")[1];$("#avBeds").val(theseBeds),console.log("search "+theseBeds),apiForm.submit()}